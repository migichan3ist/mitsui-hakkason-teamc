<html lang="ja">
<head>
    <title>マイページ</title>
    <link rel="stylesheet" href="stylesheet.css" type="text/css" /> 
    <script>
        function successUserName(result){
            // IDを使ってspan要素を取得する
            const recieveUserName = document.getElementById("recieveUserName");
            // 取得したspan要素に受け取ったパラメータを代入
            recieveUserName.innerText = result.username;
        }

        async function callUserNameApi(url) {
            console.log(url);
            fetch(url, {
                mode: 'cors'
            }).then(response => response.json())
            .then(result => {
                successUserName(result);
            });
        };
        window.onload = function() {
            const nowUrl = new URL(window.location.href);
            const params = nowUrl.searchParams;
            const userid = params.get("id");
            const url = 'http://127.0.0.1:8000/users_search_for_id/' + userid;
            callUserNameApi(url);
        }
    </script>
</head>
<body>
    <h1>マイページ</h1>
    <p style="font-size: 120%">こんにちは、<span id="recieveUserName"></span>さん！</p>
    <button id="move_camera" class="index" 
    style="color: #fff; background: #16a085;">育てる</button>
    <!-- <button id="move_bet" class="index" 
    style="color: #fff; background: #d35400;">賭ける</button> -->
    <button id="move_conform" class="index" 
    style="color: #fff; background: #bdc3c7;">結果</button>
    
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <script src="js/index.js"></script>  
</body>
</html>